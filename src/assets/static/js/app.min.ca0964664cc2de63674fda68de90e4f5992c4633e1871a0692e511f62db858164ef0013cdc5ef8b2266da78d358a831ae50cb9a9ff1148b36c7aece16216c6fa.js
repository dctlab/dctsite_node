var lastWindowInnerHeight,lastWindowInnerWidth,resizeTimerId;window.screenSize=function(){return matchMedia('(max-width: 767px)').matches?'xs':matchMedia('(max-width: 991px)').matches?'sm':matchMedia('(max-width: 1199px)').matches?'md':matchMedia('(max-width: 1599px)').matches?'lg':'xl'},window.resizeJournalListFeatureImage=function(){var a=document.querySelector('.journal-feature-image');if(!a)return;a.style.height=Math.round(a.clientWidth*.75)+'px'},window.resizeJournalListItemImage=function(a){screenSize()=='xs'||screenSize()=='sm'?a.style.height=Math.round(a.clientWidth*.75)+'px':a.style.height=a.clientWidth+'px'},window.resizeAllJournalListItemImages=function(){var a=document.querySelectorAll('.journal-list-image');for(let b=0;b<a.length;b++)resizeJournalListItemImage(a[b])},window.resizeJournalArticleImage=function(){var a=document.querySelector('.journal-main-image'),b,c;if(!a)return;b=parseInt(a.dataset.windowOuterHeight),c=parseInt(a.dataset.windowInnerWidth),(a.dataset.windowOuterHeight===void 0||b!==window.outerHeight||a.dataset.windowInnerWidth===void 0||c!==window.innerWidth)&&(a.style.height=window.innerHeight+'px',a.dataset.windowOuterHeight=window.outerHeight,a.dataset.windowInnerWidth=window.innerWidth)},window.resizeJournalContentImageWrapper=function(a){var b,c;if(a.style.left)if(a.style.left!='-9999px'){a.style.left='-9999px';return}b=a.getBoundingClientRect(),screenSize()=='xs'||screenSize()=='sm'?(a.style.left=parseInt(a.style.left||0)-b.left+'px',a.style.width='100vw'):(c=b.left-parseInt(a.style.left||0),a.style.left='0px',a.style.width=window.innerWidth-c+'px')},window.resizeAllJournalContentImageWrappers=function(){var b=document.body.getBoundingClientRect().left,a;if(b)return;if(lastWindowInnerWidth===window.innerWidth)return;lastWindowInnerWidth=window.innerWidth,lastWindowInnerHeight=window.innerHeight,a=document.querySelectorAll('.journal-content-image-wrapper');for(let b=0;b<a.length;b++)resizeJournalContentImageWrapper(a[b]);for(let b=0;b<a.length;b++)setTimeout(function(){resizeJournalContentImageWrapper(a[b])},0)},window.resizeJournalArticleTitleShapeOutlineDiv=function(){var a=document.querySelector('.journal-title-shape-outside-triangle'),b;if(!a)return;b=document.querySelector('#journal-article-title'),a.style.height=b.clientHeight+'px'},window.onresize=function(){resizeTimerId&&clearTimeout(res),res=setTimeout(function(){resizeJournalArticleImage(),resizeJournalArticleTitleShapeOutlineDiv(),resizeJournalListFeatureImage(),resizeAllJournalListItemImages(),resizeAllJournalContentImageWrappers()},10)},window.firstJournalURL=function(){return journalPages[0].url},window.firstJournalTitle=function(){return journalPages[0].title},window.lastJournalURL=function(){return journalPages[journalPages.length-1].url},window.lastJournalTitle=function(){return journalPages[journalPages.length-1].title},window.getJournalIndex=function(a){return journalPages.findIndex(b=>b.title===a)},window.prevJournalItem=function(a){let b=getJournalIndex(a)-1;return journalPages[Math.max(b,0)]},window.prevJournalURL=function(a){return prevJournalItem(a).url},window.prevJournalTitle=function(a){return prevJournalItem(a).title},window.nextJournalItem=function(a){let b=getJournalIndex(a)+1;return journalPages[Math.min(b,journalPages.length-1)]},window.nextJournalURL=function(a){return nextJournalItem(a).url},window.nextJournalTitle=function(a){return nextJournalItem(a).title},window.randomJournalURL=function(b){var a,c;if(b){{a=[];for(let c=0;c<journalPages.length;c++)journalPages[c].topics.includes(b)&&a.push(journalPages[c])}}else a=journalPages;return c=a[Math.floor(Math.random()*a.length)],c.url},window.onload=function(){var e,g,a,b,i,j,k;if(!document.querySelector('#search-input'))return;e=$('#search-input'),Number.prototype.number_with_delimiter=function(a){var c=this+'',a=a||',',b=c.split('.');return b[0]=b[0].replace(/(\d)(?=(\d\d\d)+(?!\d))/g,'$1'+a),b.join('.')};function f(b){var a='',c;for(c in b)b.hasOwnProperty(c)&&(a+=a===''?'':' - ',a+=b[c]);return a}function d(a,b){var d=c(a,b._snippetResult);return d||c(a,b)}function c(d,e){var c=d.split("."),a=e,b;return!($.each(c,function(b){a=a&&a[c[b]]}),!a)&&(a.value?a.value:Object.prototype.toString.call(a)==='[object Array]'?(b=[],$.each(a,function(c,a){a&&typeof a=='string'?b.push(a):a&&a.value?b.push(a.value):a&&b.push(f(a))}),b.join(', ')):(typeof a=='object'&&(a=f(a)),''+a))}g=['objectID','_highlightResult'],a=[],'hierarchy.lvl0'!==''&&a.push('hierarchy.lvl0'),'hierarchy.lvl1'!==''&&a.push('hierarchy.lvl1'),'content'!==''&&a.push('');function l(d){var f=0,b=[],e,c;h(d,'',b);for(e in a)c=b.indexOf(a[e]),c!=-1&&b.splice(c,1);return b}function h(b,c,d){var e=c===''?'':'.',a;for(a in b)b.hasOwnProperty(a)&&g.indexOf(a)===-1&&(typeof b[a]=="object"?Object.prototype.toString.call(b[a])==='[object Array]'?d.push(c+e+a):h(b[a],c+e+a,d):d.push(c+e+a))}b=window.app.algolia,i=algoliasearch(b.applicationID,b.searchOnlyAPIKey),j=i.initIndex(b.index),k={debug:!1,openOnFocus:!0},e.autocomplete(k,{source:$.fn.autocomplete.sources.hits(j,{hitsPerPage:5}),displayKey:'hierarchy.lvl0',templates:{suggestion:function(f){var a='<div class="hit">',b,e;return'hierarchy.lvl0'!==''&&(b=d('hierarchy.lvl0',f),a+='<span class="primary-attribute">',e=c('url',f),e.indexOf('#')!=-1&&(e=e.substring(0,e.indexOf('#'))),a+='<a href="'+e+'">',a+=b,a+='</a>',a+='</span>'),'hierarchy.lvl1'!==''&&(b=d('hierarchy.lvl1',f),b&&b.trim()!==''&&(a+=' <span class="secondary-attribute">',a+=b,a+='</span>')),'content'!==''&&(b=d('content',f),b&&b.trim()!==''&&(a+=' <span class="tertiary-attribute">',a+=b,a+='</span>')),a+="<span class='clearfix'></span>",a}}}).on('autocomplete:selected',function(d,b,e){var a=c('url',b);a.indexOf('#')!=-1&&(a=a.substring(0,a.indexOf('#'))),location.href=a})}
